<div class="h-[calc(100vh-64px)] overflow-y-auto bg-gray-50/50 relative p-4 lg:p-10">
    <div class="max-w-7xl mx-auto min-h-full flex flex-col">

        <!-- Header Section -->
        <div class="mb-10 animate-fade-in-up">
            <h1 class="text-4xl lg:text-5xl font-extrabold text-gray-900 tracking-tight font-outfit mb-4">
                {{ regionInfo.name }}
            </h1>
            <p class="text-lg text-gray-600 max-w-3xl leading-relaxed">
                {{ regionInfo.info }}
            </p>
        </div>

        <!-- Region Navigation Toggles -->
        <div class="flex items-center gap-3 mb-10 overflow-x-auto pb-4 scrollbar-hide">
            <span class="text-sm font-semibold text-gray-400 uppercase tracking-widest whitespace-nowrap mr-2">Região
                Administrativa:</span>

            <div class="flex gap-2">
                @for (key of regionKeys; track key) {
                <button (click)="setRegion(key)" [class.bg-green-700]="regionName === key"
                    [class.text-white]="regionName === key" [class.shadow-md]="regionName === key"
                    [class.border-green-700]="regionName === key" [class.bg-white]="regionName !== key"
                    [class.text-gray-600]="regionName !== key" [class.border-gray-200]="regionName !== key"
                    [class.hover:bg-green-50]="regionName !== key"
                    class="px-5 py-2.5 rounded-xl border text-sm font-semibold transition-all duration-300 whitespace-nowrap">
                    {{ regionLabels[key] }}
                </button>
                }
            </div>
        </div>

        <header class="flex justify-between items-center mb-8">
            <h2 class="text-3xl font-bold text-gray-800">Ilhas de Calor e Sustentabilidade DF</h2>
        </header>

        <!-- Loading State -->
        <div *ngIf="isLoading" class="flex flex-col items-center justify-center py-20">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mb-4"></div>
            <p class="text-gray-500 font-medium animate-pulse">Consultando Satélites e Sensores (Open-Meteo, IBGE,
                MapBiomas)...
            </p>
        </div>

        <!-- Indicators Grid -->
        <div *ngIf="!isLoading && indicators" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

            <!-- Temperature (Open-Meteo) -->
            <div
                class="bg-gradient-to-br from-orange-50 to-red-50 rounded-xl shadow-sm border border-red-100 p-6 flex flex-col relative overflow-hidden group hover:shadow-md transition-all">
                <div class="absolute -right-4 -top-4 text-red-200/50 group-hover:scale-110 transition-transform">
                    <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z" />
                    </svg>
                </div>
                <div class="relative z-10 flex items-start justify-between">
                    <div>
                        <h3 class="text-sm font-bold text-red-800 uppercase tracking-widest mb-1">Temperatura</h3>
                        <p class="text-xs text-red-600 mb-4">Solo (0cm) / Superfície - Tempo Real</p>
                    </div>
                    <span
                        class="bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 rounded border border-red-200">Open-Meteo</span>
                </div>
                <div class="relative z-10 mt-auto">
                    <div class="flex items-baseline space-x-2">
                        <span class="text-5xl font-black text-red-600 tracking-tighter">{{ indicators.temperature
                            }}</span>
                    </div>
                </div>
            </div>

            <!-- Flood Risk (Open-Meteo) -->
            <div
                class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl shadow-sm border border-blue-100 p-6 flex flex-col relative overflow-hidden group hover:shadow-md transition-all">
                <div class="absolute -right-4 -bottom-4 text-blue-200/50 group-hover:scale-110 transition-transform">
                    <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M12 3c-1.3 2.5-4 5.7-4 8 0 2.2 1.8 4 4 4s4-1.8 4-4c0-2.3-2.7-5.5-4-8zM4.3 16.5c-1.3-1.6-1.3-4.2 0-6l1.4 1.4c-.6.8-.6 2.1 0 3l-1.4 1.6zM19.7 16.5l-1.4-1.6c.6-.9.6-2.2 0-3l1.4-1.4c1.3 1.8 1.3 4.4 0 6z" />
                    </svg>
                </div>
                <div class="relative z-10 flex items-start justify-between">
                    <div>
                        <h3 class="text-sm font-bold text-blue-800 uppercase tracking-widest mb-1">Risco de Alagamento
                        </h3>
                        <p class="text-xs text-blue-600 mb-4">Precipitação / Escoamento Superficial</p>
                    </div>
                    <span
                        class="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded border border-blue-200">Open-Meteo</span>
                </div>
                <div class="relative z-10 mt-auto">
                    <div class="flex items-baseline space-x-2">
                        <span class="text-4xl font-black text-blue-600 tracking-tight">{{ indicators.floodRisk }}</span>
                    </div>
                </div>
            </div>

            <!-- Elevation (Open-Elevation) -->
            <div
                class="bg-gradient-to-br from-stone-50 to-stone-100 rounded-xl shadow-sm border border-stone-200 p-6 flex flex-col relative overflow-hidden group hover:shadow-md transition-all">
                <div class="absolute -right-2 -bottom-6 text-stone-200/80 group-hover:scale-110 transition-transform">
                    <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M14 6l-3.8 5 1.5 2 2.3-3 4.5 6H.5L10 3.5 14 6z" />
                    </svg>
                </div>
                <div class="relative z-10 flex items-start justify-between">
                    <div>
                        <h3 class="text-sm font-bold text-stone-800 uppercase tracking-widest mb-1">Altitude Média
                            (Relevo)</h3>
                        <p class="text-xs text-stone-600 mb-4">Centróide da RA</p>
                    </div>
                    <span
                        class="bg-stone-200 text-stone-800 text-xs font-semibold px-2.5 py-0.5 rounded border border-stone-300">Open-Elevation</span>
                </div>
                <div class="relative z-10 mt-auto">
                    <div class="flex items-baseline space-x-2">
                        <span class="text-5xl font-black text-stone-600 tracking-tighter">{{ indicators.elevation
                            }}</span>
                    </div>
                </div>
            </div>

            <!-- Population Density (IBGE) -->
            <div
                class="bg-gradient-to-br from-purple-50 to-fuchsia-50 rounded-xl shadow-sm border border-purple-100 p-6 flex flex-col relative overflow-hidden group hover:shadow-md transition-all">
                <div class="absolute -right-4 -bottom-4 text-purple-200/50 group-hover:scale-110 transition-transform">
                    <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M12 12c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4m0 2c-2.7 0-8 1.3-8 4v2h16v-2c0-2.7-5.3-4-8-4z" />
                    </svg>
                </div>
                <div class="relative z-10 flex items-start justify-between">
                    <div>
                        <h3 class="text-sm font-bold text-purple-800 uppercase tracking-widest mb-1">População Estimada
                        </h3>
                        <p class="text-xs text-purple-600 mb-4">Pressão Antrópica na RA</p>
                    </div>
                    <span
                        class="bg-purple-100 text-purple-800 text-xs font-semibold px-2.5 py-0.5 rounded border border-purple-200">IBGE</span>
                </div>
                <div class="relative z-10 mt-auto">
                    <div class="flex items-baseline space-x-2">
                        <span class="text-5xl font-black text-purple-600 tracking-tighter">{{ indicators.population
                            }}</span>
                    </div>
                </div>
            </div>

            <!-- Soil Sealing (MapBiomas) -->
            <div
                class="bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl shadow-sm border border-emerald-100 p-6 flex flex-col relative overflow-hidden group hover:shadow-md transition-all md:col-span-2 lg:col-span-2">
                <div class="absolute right-0 top-0 h-full w-1/3 bg-emerald-100/30 transform -skew-x-12 translate-x-10">
                </div>
                <div class="relative z-10 flex items-start justify-between">
                    <div>
                        <h3 class="text-sm font-bold text-emerald-800 uppercase tracking-widest mb-1">Impermeabilização
                            do Solo
                        </h3>
                        <p class="text-xs text-emerald-600 mb-4">Total de avanço de Área Urbana e Infraestrutura
                            (Asfalto/Concreto) na RA</p>
                    </div>
                    <span
                        class="bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded border border-emerald-200">MapBiomas
                        API</span>
                </div>
                <div class="relative z-10 mt-auto">
                    <div class="flex items-center space-x-4">
                        <div class="flex items-baseline space-x-1">
                            <span class="text-6xl font-black text-emerald-600 tracking-tighter">{{
                                indicators.soilSealing }}</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Heat Islands Context Panel -->
        <div *ngIf="!isLoading && indicators" class="mt-8 bg-green-50 border border-green-100 rounded-xl p-6 shadow-sm">
            <div class="flex items-start space-x-4">
                <div class="bg-green-600 p-3 rounded-full text-white mt-1 shadow-sm shrink-0">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-green-900 mb-2">Por que visualizar essas métricas juntas em {{
                        regionInfo.name }}?</h3>
                    <p class="text-green-800 leading-relaxed mb-4">
                        Segundo o <b>WRI Brasil</b>, as Ilhas de Calor Urbanas são fenômenos onde áreas densamente
                        construídas retêm muito mais calor que as zonas rurais ao redor. A <b>impermeabilização</b>
                        extrema exposta acima e a alta <b>população</b> agravam temperaturas extremas nas periferias do
                        DF.
                    </p>
                    <div class="bg-white/50 rounded-lg p-4 border border-green-100/50">
                        <h4 class="text-sm font-bold text-green-900 uppercase tracking-wide mb-2 flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Oportunidade para Soluções Baseadas na Natureza (SBN)
                        </h4>
                        <p class="text-green-800/90 text-sm leading-relaxed">
                            A mitigação pode ser alcançada aplicando <b>Infraestrutura Verde</b>: telhados verdes,
                            parques lineares e calçadas drenantes. Essas medidas restauram a <b>permeabilidade</b>
                            local, combatem os picos de <b>Temperatura</b> listados nos sensores espaciais, e
                            consequentemente, mitigam o <b>Risco de Alagamento</b> evidenciado nas enxurradas durante as
                            estações chuvosas.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>